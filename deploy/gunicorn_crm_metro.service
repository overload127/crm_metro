[Unit]
Description=gunicorn daemon crm_metro for server and client and admin
Requires=gunicorn_crm_metro.socket
After=network.target

[Service]
User=crm_metro_user
Group=caddy
WorkingDirectory=/home/crm_metro_user/crm_metro
Environment="PATH=/home/crm_metro_user/crm_metro/server/evn/bin"
Environment="PATH=/home/crm_metro_user/crm_metro/server/evn"
Environment=PYTHONPATH='/home/crm_metro_user/crm_metro/server/evn'
ExecStart=/home/crm_metro_user/crm_metro/server/env/bin/gunicorn \
          --access-logfile /home/crm_metro_user/crm_metro/log/gunicorn/access.log \
          --error-logfile /home/crm_metro_user/crm_metro/log/gunicorn/error.log \
          --capture-output \
          -k uvicorn.workers.UvicornWorker \
          --workers 3 \
          --bind unix:/run/gunicorn_crm_metro.sock \
          metro_cms_reset.asgi:application

[Install]
WantedBy=multi-user.target
